<?xml version="1.1" encoding="UTF-8"?>
<pipeline>
   <elements>
      <add>
         <element>
            <id>combinedParser</id>
            <type>CombinedParser</type>
         </element>
         <element>
            <id>readRecordCountFilter</id>
            <type>RecordCountFilter</type>
         </element>
         <element>
            <id>splitFilter</id>
            <type>SplitFilter</type>
         </element>
         <element>
            <id>translationFilter</id>
            <type>XSLTFilter</type>
         </element>
         <element>
            <id>flattenFilter</id>
            <type>XSLTFilter</type>
         </element>
         <element>
            <id>xmlWriter</id>
            <type>XMLWriter</type>
         </element>
         <element>
            <id>textWriter</id>
            <type>TextWriter</type>
         </element>
         <element>
            <id>fileAppender</id>
            <type>FileAppender</type>
         </element>
      </add>
   </elements>
   <properties>
      <add>
         <property>
            <element>readRecordCountFilter</element>
            <name>countRead</name>
            <value>
               <boolean>true</boolean>
            </value>
         </property>
         <property>
            <element>splitFilter</element>
            <name>splitDepth</name>
            <value>
               <integer>1</integer>
            </value>
         </property>
         <property>
            <element>splitFilter</element>
            <name>splitCount</name>
            <value>
               <integer>100</integer>
            </value>
         </property>
         <property>
            <element>fileAppender</element>
            <name>outputPaths</name>
            <value>
               <string>${stroom.temp}/search/${searchId}/${streamId}_${feed}-${uuid}.out</string>
            </value>
         </property>
      </add>
   </properties>
   <links>
      <add>
         <link>
            <from>combinedParser</from>
            <to>readRecordCountFilter</to>
         </link>
         <link>
            <from>readRecordCountFilter</from>
            <to>splitFilter</to>
         </link>
         <link>
            <from>splitFilter</from>
            <to>translationFilter</to>
         </link>
         <link>
            <from>translationFilter</from>
            <to>flattenFilter</to>
         </link>
         <link>
            <from>flattenFilter</from>
            <to>textWriter</to>
         </link>
         <link>
            <from>textWriter</from>
            <to>fileAppender</to>
         </link>
      </add>
   </links>
</pipeline>
